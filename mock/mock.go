package mock

import (
	"github.com/mailru/easyjson"
	"github.com/stretchr/testify/assert"
	"github.com/ulstu-schedule/parser/types"
	"testing"
)

func TestGroupSchedule(t *testing.T) *types.Schedule {
	t.Helper()

	schedule := &types.Schedule{}

	jsonSchedule := []byte(`{"weeks": [{"days": [{"lessons": [{"sub_lessons": []}, {"sub_lessons": [{"с": 1, "name": "Основы компьютерного обеспечения автомобильного производства ", "room": "1-231", "type": 1, "group": "АТсд-21", "teacher": "Евстигнеев А Д", "practice": "", "sub_group": "1 п/г"}]}, {"sub_lessons": [{"с": 2, "name": "Основы компьютерного обеспечения автомобильного производства ", "room": "1-231", "type": 1, "group": "АТсд-21", "teacher": "Евстигнеев А Д", "practice": "", "sub_group": "2 п/г"}]}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 11}, {"lessons": [{"sub_lessons": []}, {"sub_lessons": [{"с": 1, "name": "Компьютерная графика", "room": "6-401", "type": 0, "group": "АТсд-21", "teacher": "Рандин А В", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 2, "name": "Элективные курсы по физичeской культуре и спорту", "room": "2-СЗ", "type": 2, "group": "АТсд-21", "teacher": "Преподaватели кафедры", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 3, "name": "Электротехника,  электроника и электропривод", "room": "6-530", "type": 0, "group": "АТсд-21", "teacher": "Меньшов Е Н", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 4, "name": "Электротехника,  электроника и электропривод", "room": "6-530", "type": 2, "group": "АТсд-21", "teacher": "Меньшов Е Н", "practice": "", "sub_group": ""}]}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 11}, {"lessons": [{"sub_lessons": []}, {"sub_lessons": [{"с": 1, "name": "Иностранный язык", "room": "6-501", "type": 2, "group": "АТсд-21", "teacher": "Шарафутдинова Н С", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 2, "name": "Детали машин и основы конструирования", "room": "6-401", "type": 0, "group": "АТсд-21", "teacher": "Олешкевич А В", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 3, "name": "Детали машин и основы конструирования", "room": "6-401", "type": 2, "group": "АТсд-21", "teacher": "Олешкевич А В", "practice": "", "sub_group": ""}]}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 11}, {"lessons": [{"sub_lessons": [{"с": 0, "name": "Иностранный язык ", "room": "6-516", "type": 2, "group": "АТсд-21", "teacher": "Ларнер Э А", "practice": "", "sub_group": "1 п/г"}]}, {"sub_lessons": [{"с": 1, "name": "Компьютерная графика ", "room": "6-416", "type": 1, "group": "АТсд-21", "teacher": "Рандин А В", "practice": "", "sub_group": "1 п/г"}]}, {"sub_lessons": [{"с": 2, "name": "Элективные курсы по физичeской культуре и спорту", "room": "2-СЗ", "type": 2, "group": "АТсд-21", "teacher": "Преподaватели кафедры", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 3, "name": "Философия", "room": "6-419", "type": 0, "group": "АТсд-21", "teacher": "Розанов Ф И", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 4, "name": "Иностранный язык ", "room": "6-503", "type": 2, "group": "АТсд-21", "teacher": "Жукова Ю В", "practice": "", "sub_group": "3 п/г"}]}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 11}, {"lessons": [{"sub_lessons": [{"с": 0, "name": "Сопротивление материалов", "room": "6-002(2)", "type": 0, "group": "АТсд-21", "teacher": "Битюрин А А", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 1, "name": "Сопротивление материалов", "room": "6-002(2)", "type": 2, "group": "АТсд-21", "teacher": "Битюрин А А", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 2, "name": "Компьютерная графика ", "room": "6-416", "type": 1, "group": "АТсд-21", "teacher": "Рандин А В", "practice": "", "sub_group": "2 п/г"}]}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 11}, {"lessons": [{"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 11}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}], "number": 11, "date_end": "2024-04-21T00:00:00Z", "date_start": "2024-04-15T00:00:00Z"}, {"days": [{"lessons": [{"sub_lessons": []}, {"sub_lessons": [{"с": 1, "name": "Основы компьютерного обеспечения автомобильного производства ", "room": "1-231", "type": 1, "group": "АТсд-21", "teacher": "Евстигнеев А Д", "practice": "", "sub_group": "1 п/г"}]}, {"sub_lessons": [{"с": 2, "name": "Основы компьютерного обеспечения автомобильного производства ", "room": "1-231", "type": 1, "group": "АТсд-21", "teacher": "Евстигнеев А Д", "practice": "", "sub_group": "2 п/г"}]}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 12}, {"lessons": [{"sub_lessons": []}, {"sub_lessons": [{"с": 1, "name": "Гидравлика и гидропневмопривод", "room": "6-003", "type": 1, "group": "АТсд-21", "teacher": "Пазушкина О В", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 2, "name": "Элективные курсы по физичeской культуре и спорту", "room": "2-СЗ", "type": 2, "group": "АТсд-21", "teacher": "Преподaватели кафедры", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 3, "name": "Компьютерная графика ", "room": "6-416", "type": 1, "group": "АТсд-21", "teacher": "Рандин А В", "practice": "", "sub_group": "1 п/г"}]}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 12}, {"lessons": [{"sub_lessons": []}, {"sub_lessons": [{"с": 1, "name": "Иностранный язык ", "room": "6-505", "type": 2, "group": "АТсд-21", "teacher": "Ларнер Э А", "practice": "", "sub_group": "1 п/г"}]}, {"sub_lessons": [{"с": 2, "name": "Сопротивление материалов", "room": "6-002(2)", "type": 0, "group": "АТсд-21", "teacher": "Битюрин А А", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 3, "name": "Сопротивление материалов", "room": "6-002(2)", "type": 1, "group": "АТсд-21", "teacher": "Битюрин А А", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 4, "name": "Иностранный язык ", "room": "6-503", "type": 2, "group": "АТсд-21", "teacher": "Жукова Ю В", "practice": "", "sub_group": "3 п/г"}]}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 12}, {"lessons": [{"sub_lessons": []}, {"sub_lessons": [{"с": 1, "name": "Иностранный язык", "room": "6-501", "type": 2, "group": "АТсд-21", "teacher": "Шарафутдинова Н С", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 2, "name": "Элективные курсы по физичeской культуре и спорту", "room": "2-СЗ", "type": 2, "group": "АТсд-21", "teacher": "Преподaватели кафедры", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 3, "name": "Спецглавы математики", "room": "6-601", "type": 0, "group": "АТсд-21", "teacher": "Вельмисов П А", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 4, "name": "Спецглавы математики", "room": "6-601", "type": 2, "group": "АТсд-21", "teacher": "Вельмисов П А", "practice": "", "sub_group": ""}]}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 12}, {"lessons": [{"sub_lessons": []}, {"sub_lessons": [{"с": 1, "name": "Философия", "room": "6-618", "type": 2, "group": "АТсд-21", "teacher": "Розанов Ф И", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 2, "name": "Гидравлика и гидропневмопривод", "room": "6-003", "type": 1, "group": "АТсд-21", "teacher": "Пазушкина О В", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 3, "name": "Электротехника,  электроника и электропривод", "room": "6-523", "type": 1, "group": "АТсд-21", "teacher": "Меньшов Е Н", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 4, "name": "Компьютерная графика ", "room": "6-416", "type": 1, "group": "АТсд-21", "teacher": "Рандин А В", "practice": "", "sub_group": "2 п/г"}]}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 12}, {"lessons": [{"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}, {"sub_lessons": []}], "week_number": 12}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}], "number": 12, "date_end": "2024-04-28T00:00:00Z", "date_start": "2024-04-22T00:00:00Z"}]}`)

	err := easyjson.Unmarshal(jsonSchedule, schedule)

	if err != nil {
		assert.Error(t, err)
	}
	return schedule
}

func TestTeacherSchedule(t *testing.T) *types.Schedule {
	t.Helper()

	schedule := &types.Schedule{}

	jsonSchedule := []byte(`{"weeks": [{"days": [{"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 10}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": [{"с": 6, "name": "Типографика и шрифтография", "room": "5-ДОТ", "type": 2, "group": "ИДбв-11", "teacher": "Зенкина С М", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 7, "name": "Типографика и шрифтография", "room": "5-ДОТ", "type": 2, "group": "ИДбв-11", "teacher": "Зенкина С М", "practice": "", "sub_group": ""}]}], "week_number": 10}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": [{"с": 1, "name": "Компьютерная графика и видеотехнологии - 1 п/г", "room": "6-329", "type": 1, "group": "СОбд-21", "teacher": "Зенкина С М", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 2, "name": "Компьютерная графика и видеотехнологии - 1 п/г", "room": "6-329", "type": 1, "group": "СОбд-21", "teacher": "Зенкина С М", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 3, "name": "Компьютерная графика и видеотехнологии", "room": "6-НБ8", "type": 0, "group": "СОбд-21", "teacher": "Зенкина С М", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 4, "name": "Компьютерная графика и видеотехнологии - 2 п/г", "room": "6-329", "type": 1, "group": "СОбд-21", "teacher": "Зенкина С М", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 5, "name": "Компьютерная графика и видеотехнологии - 2 п/г", "room": "6-329", "type": 1, "group": "СОбд-21", "teacher": "Зенкина С М", "practice": "", "sub_group": ""}]}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 10}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 10}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": [{"с": 1, "name": "Компьютерная графика и дизайн в маркетинге", "room": "2-227", "type": 2, "group": "МКбд-21", "teacher": "Зенкина С М", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 2, "name": "Компьютерная графика и дизайн в маркетинге", "room": "2-227", "type": 2, "group": "МКбд-21", "teacher": "Зенкина С М", "practice": "", "sub_group": ""}]}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 10}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 10}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}], "number": 10, "date_end": "2024-04-14T00:00:00Z", "date_start": "2024-04-08T00:00:00Z"}, {"days": [{"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 11}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": [{"с": 2, "name": "Компьютерная графика и дизайн в маркетинге", "room": "2-323", "type": 0, "group": "МКбд-21", "teacher": "Зенкина С М", "practice": "", "sub_group": ""}]}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 11}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 11}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 11}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 11}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 11}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}], "number": 11, "date_end": "2024-04-21T00:00:00Z", "date_start": "2024-04-15T00:00:00Z"}]}`)

	err := easyjson.Unmarshal(jsonSchedule, schedule)

	if err != nil {
		assert.Error(t, err)
	}
	return schedule
}

func TestRoomSchedule(t *testing.T) *types.Schedule {
	t.Helper()

	schedule := &types.Schedule{}

	jsonSchedule := []byte(`{"weeks": [{"days": [{"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": [{"с": 6, "name": "Геология", "room": "4-36", "type": 2, "group": "ПГСбв-21", "teacher": "Азизов З К", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 7, "name": "Геология", "room": "4-36", "type": 2, "group": "ПГСбв-21", "teacher": "Азизов З К", "practice": "", "sub_group": ""}]}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}], "number": 0, "date_end": "2024-04-21T00:00:00Z", "date_start": "2024-04-15T00:00:00Z"}, {"days": [{"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": [{"с": 6, "name": "Геология", "room": "4-36", "type": 2, "group": "ПГСбву-21", "teacher": "Азизов З К", "practice": "", "sub_group": ""}]}, {"sub_lessons": [{"с": 7, "name": "Геология", "room": "4-36", "type": 2, "group": "ПГСбву-21", "teacher": "Азизов З К", "practice": "", "sub_group": ""}]}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}, {"lessons": [{"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}, {"sub_lessons": null}], "week_number": 0}], "number": 0, "date_end": "2024-04-28T00:00:00Z", "date_start": "2024-04-22T00:00:00Z"}]}`)

	err := easyjson.Unmarshal(jsonSchedule, schedule)

	if err != nil {
		assert.Error(t, err)
	}
	return schedule
}
